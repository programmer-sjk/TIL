# 더 나은 코드리뷰를 향하여

- 근래 코드 리뷰를 조금 더 잘하고 싶다는 생각이 들었다.
- 내가 생각하는 좋은 코드 리뷰, 다른 개발자 분들의 의견 중 동의되는 것들을 이번 기회에 정리하려 한다.

## 내가 생각하는 코드 리뷰. 더 나은 코드 리뷰

- 코드 리뷰를 통해 무엇을 얻을 수 있을까? 개인적으로 생각하는 코드 리뷰의 순 기능은 아래와 같다.
  - 장애나 버그를 만드는 코드를 사전에 발견 및 수정
  - 컨벤션을 벗어난 코드들을 일관되게 유지
  - 코드 리뷰에 참여한 사람들이 합의하는 가독성이 더 나은 코드를 배포
- 리뷰를 통해 위와 같은 장점들을 얻을 수 있다고 하면 더 나은 코드리뷰는 어때야 할까?
  - 리뷰를 통해 서로의 성장을 돕는다.
  - 서로를 배려해야 한다.
  - 개선이나 변경을 요청한 코드에 대해 이유를 충분히 설명해야 한다.

## 공감되는 다른 개발자 분들의 좋은 코드 리뷰 기준

### PR 잘 요청하기

- 코드 리뷰에서 LoC의 변경은 300 Line을 넘지 않도록 한다.

  - Cisco 시스템 프로그래밍 팀의 연구에 따르면 300줄에서 400줄 정도의 코드를 60분에서 90분 동안 리뷰하면 70~90%의 결함을 발견할 수 있다고 한다.

  <img src="https://github.com/programmer-sjk/TIL/blob/main/images/culture/review-loc.png" width="500">

- 라인 수에 따른 결함 발견 밀집도

<img src="https://github.com/programmer-sjk/TIL/blob/main/images/culture/defect-loc.png" width="500">

- 리뷰어에게 PR을 통해 충분한 정보를 제공하자

```
Reviewer resource is very limited, treat it wisely!
(리뷰어는 매우 제한되어 있으니 그들을 현명하게 다룹시다!)
```

- 리뷰어 N명의 시간을 절약하기 위해 충분한 정보를 제공하는 것이 중요하다.
- 무슨 이유로 어떻게 코드를 변경했는지, 어떤 위험이나 우려가 발견되었는지에 대한 충분한 정보를 리뷰어에게 제공해야 한다.

### 개선이 필요한 이유에 대해 충분한 설명을 한다

### 해결사가 아니라 조언자가 되도록 합시다.

- 코드 리뷰에서 너무 공격적인 어투나 본인의 지식을 자랑하지 맙시다.
  예를 들어 "이 코드는 이 부분이 잘못되었어요."라는 리뷰는 좋지 않습니다.
  "이 부분은 이런 문제가 있을 가능성이 있네요. 이런 방법으로 한번 체크해 보는 건 어떨까요?"라는 식의 조언을 통한 부드러운 코드 리뷰를 이끌어 봅시다.

### 저 문맥(Low Context) 커뮤니케이션을 지향

- 질문을 하거나 대답을 할 때, 내가 알고 있는 것을 상대방도 알고 있을 것이라는 가정을 하지 않고 충분한 문맥을 전달해야 한다. 상대방의 의도를 파악하기 위한 추가적인 커뮤니케이션 또는 미스 커뮤니케이션으로 발생하는 비용이 매우 비싼 비용이라는 문제의식을 공유한다.

## 코드 리뷰의 부작용

### 병목이 되는 코드 리뷰

- PR이 어떠한 요구사항을 해결하기 위해 어떠한 변경사항을 담고 있는 것인지 Reviewer가 이해하고 리뷰하는 과정에 시간과 에너지가 많이 소모된다.
- 일부 PR의 경우, 변경 사항의 사이즈가 커서 리뷰하는 데 있어 확인해야 하는 범위가 크고 부담으로 다가온다.
- 리뷰어들의 일정이나 기능 개발이 바쁠 경우 자연스럽게 후순위로 밀리게 된다.
- Reviewer가 적은 노력으로도 충분히 비슷한 수준으로 파악할 수 있도록 자세하게 설명해 주어야 합니다.

### 의미없는 코드 리뷰

### 싸움이 되는 코드 리뷰

### 책임 소재를 묻는 코드 리뷰
