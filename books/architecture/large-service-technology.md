# 대규모 서비스를 지탱하는 기술

- [책 링크](https://product.kyobobook.co.kr/detail/S000001550638)

## 1. 대규모 웹 서비스 개발 오리엔테이션

### 대규모 서비스와 소규모 서비스

#### 소규모 서비스와 대규모 서비스의 차이

- 서버 몇 대 있는 소규모 서비스에는 없는, 대규모 서비스에만 있는 문제나 어려움에는 어떤 점들이 있을까?
  - 확장성 확보, 부하 분산 필요
    - 서버 1대일때는 필요 없던 로드 밸런서 도입이 필요
    - DB의 데이터 동기화는 어떻게 할 것인가?
  - 다중성 확보
    - 서버가 고장나거나 성능이 저하되더라도 서비스를 계속할 수 있는 구성이 필요하다.
  - 효율적 운용
    - 서버가 1대라면 정상 동작하는지 간단히 파악이 가능하다.
    - 서버 대수가 100대를 넘어서면 각 서버가 어떤 역할을 하는지 파악하는 것도 고생거리다.
    - 감시용 SW를 사용하고 정보관리를 위해 자동화를 하게 된다.
  - 개발자 수, 개발 방법
    - 개발 표준화를 어떻게 할 것인가? 언어를 통일하고 코딩 규약을 표준화, 코드 버전관리 등 팀 매니저먼트가 필요해진다.

#### 대규모 데이터량에 대한 대처

- 컴퓨터에서 데이터는 디스크 -> 메모리 -> 캐시 메모리 -> CPU와 같이 몇 단계를 경유해서 처리된다.
- 데이터량이 많아지면 처음부터 캐시 미스가 발생하게 되고 저속의 디스크 I/O가 많이 발생하게 된다.
- 데이터가 많아지면 문제가 복잡해 진다. 어떻게 데이터를 적게 가져갈까, 여러 서버로 분산시킬 수 있을까, 필요한 데이터를 최소한의 횟수로 읽어들일 수 있을까 등이 본질적인 과제가 된다.

### 계속 성장하는 서비스와 대규모화의 벽

- 책의 저자가 일한 하테나라는 기업은 처음에 펜티엄 PC 1대로 시작했다.
- 사용자가 늘어나면서 다중화와 부하분산을 적용해 나갔다. 라우터, 아파치의 부하분산, MySQL 레플리케이션 기능을 사용
- 블로그 붐이 발생하면서 시스템이 다운되는 상황이 빈번히 발생
  - 서버 룸에서 인터넷 데이터 센터로 서버 이전
  - 로드밸런서 + 감시 프로그램 도입
  - 병목 지점과 각종 로직이나 DB 스키마를 재검토해서 비효율적인 부문을 서서히 배제
- 그러나 시스템이 안정되었다고 끝내면 결국 그 이후의 성장을 위해서는 동일한 작업이 반복된다.
- 그러지 않기 위해 현재도 개발/인프라 팀이 시스템 품질 개선을 수행
