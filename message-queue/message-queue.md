# 메시지 큐

- FIFO 자료구조의 큐로써 아키텍처 관점에선 Producer / Consumer 구조로 메시지를 저장한다.
- 대표적으로 Kafka, SQS, RabbitMQ 등의 메시지 큐가 활용되고 있다.

## 메시지 큐를 사용했을 때 장점

- 비동기 처리를 통해 빠른 응답을 가능케 하고 추가적인 후처리는 뒷단에서 진행한다.
- 두 서비스간 결합도를 낮춘다. 두 서비스는 서로를 알 필요가 없고 오직 Producer / Consumer의 역할로 메시지 큐에 메시지를 전달하고 받는다.
- Consumer 서비스에 장애가 발생했을 때 일정기간 메시지를 보관하여 Consumer가 재 시작시 해당 메시지를 처리할 수 있다.
- Producer / Consumer 를 추가해서 트래픽이 몰릴 때 확장하기 쉽다.

## 메시지 큐를 사용했을 때 단점

- 비용이 든다.
- 메시지의 순서 보장 / 메세지 처리 실패 후 재시도 / 메시지 중복 등의 처리에 대해 파악해야 함
- 기능이 실패했을 때 실패 지점을 찾는데 시간이 더 소요된다.
