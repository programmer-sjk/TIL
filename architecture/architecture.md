# 아키텍처 구조

<img src="https://github.com/programmer-sjk/TIL/blob/main/images/architecture/msa-vs-monolithic.png" width="600">

## 모놀리식(monolithic)

- 전통적인 방식으로 하나의 서비스로 아키텍처를 가지는 구조

### 장점

- 개발과 실행, 빌드, 배포가 간단하며 전체적인 구조 파악이 용이하며 테스트 & 디버깅하기 쉽다.
- 일반적으로 MSA 구조보다 응답속도가 더 빠르다.
- 코드가 적거나 개발자들의 수가 적으면 MSA에 비해 생산성과 유지보수가 편리하다.

### 단점

- 일부 기능의 장애가 전체 서비스의 장애로 이어진다.
- 기능이 많아질수록 개발자가 전체 기능을 파악하기 어렵다.
- 동일한 Repository에 작업하므로 Git에 충돌이 빈번히 발생하고, 개발자들이 배포 순서를 조율해야 한다.
- 코드가 많아질수록 빌드 및 배포에 시간이 오래 소요된다.
- 언어와 프레임워크가 하나로 고정된다.

## 마이크로 서비스(MSA)

- 전체 서비스를 특정 기능을 기준으로 독립된 서비스로 분리하여 서비스들끼리 통신하여 기능을 제공

### 장점

- 특정 서비스의 장애가 전체 장애로 이어지지 않는다.
- 각 서비스들을 독립적으로 배포할 수 있고 새로운 서비스의 확장이 간단하다.
- 각 서비스마다 DB를 가지고 있어 DB의 부하를 줄일 수 있다.
- 각 서비스마다 특성에 맞는 언어와 프레임워크를 사용할 수 있다.
- 각 서비스마다 독립적인 팀이 부여되어 각 서비스 별로 성장할 수 있다.

### 단점

- 로컬에서 실행하기 어렵고, 오류가 발생했을 때 찾아내는데 시간이 소요된다.
- 각 서비스마다 통신이 발생하여 지연시간이 모놀리식보다 오래 걸릴 수 있다.
- 각 서비스마다 지표나 장애 발생시 참고할 수 있는 모니터링을 구축하는게 쉽지 않다.
- 팀이 MSA 구조에 대한 경험이 없다면 서비스간 동기/비동기로 처리하는 측면에서 생산성 & 안전 측면에서 오히려 불리할 수 있다.

## 모놀리식과 MSA를 선택할 때 고려해야 할 상황

- 개발하려는 어플리케이션의 특징
- 프로젝트의 일정
- 팀의 경험

## Repository 관점에서 본 아키텍처 구조

<img src="https://github.com/programmer-sjk/TIL/blob/main/images/architecture/mono-turbo-repo.png" width="500">

### 모놀리식

- 모놀리식 아키텍처에서는 전체 코드가 하나의 Repository에 모여있다.

### Multi Repo

- 각 프로젝트마다 하나의 Repository를 가지며 각 Repository들은 다른 프로젝트에 영향을 주지 않는다.

### Mono Repo

- 여러 프로젝트의 코드를 하나의 저장소에서 관리하는 방식
- 코드의 재사용성을 높이고, 의존성 관리를 용이하게 하며, 팀 간 협업을 강화하는 장점이 존재
- Turbo Repo는 JS 생태계에서 널리 쓰이는 모노레포를 위한 고성능 빌드 시스템
